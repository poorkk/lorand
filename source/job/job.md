[toc]

# 1 个人介绍
    您好，我叫沈坤。我从教育经历、工作经历、个人能力3方面介绍我自己。
    首先，2020年7月，毕业于北京邮电大学，信息安全专业。课程包括计算机基础课程和安全课程。
    然后，毕业到现在，一直在华为2012实验室下从事数据库内核开发。目前，主要做了2个安全特性：密态数据库和加密。
    最后，我的个人能力方面，对密钥管理和加解密比较熟悉，同时对数据库内核SQL引擎和存储引擎多个模块熟悉。

# 2 离职原因
同事离职，公共事务太多，占用60%以上时间。加上客户沟通，几乎没时间写代码。每个版本只有一个月写代码。
1. 产品接口人：每个版本都有安全部门进行渗透测试，提几百个问题，我要分析所有问题，分发责任田，每天都要跟踪每个问题，发汇报邮件
2. 产品漏洞接口人：70多款开源软件的楼，我都要跟踪处理流程
3. 安全组接口人：代码扫描问题、常见问题排查（内存泄漏、SQL注入、非法入参等）、测试用例覆盖率等 


# 3 透明加密
1. 原理
    - 从字面意思：加密表示加密存储。透明表示用户对加密过程无感知。
    - 工作流程：首先，用户定义那些表需要被加密。然后，加密表中有数据写入磁盘时，数据库会对数据进行加密；从磁盘读取加密表数据时，数据库会对数据进行解密。
2. 实现
    1. 外部依赖：用户选择一个密钥云服务，生成一个主密钥，然后在数据库中配置云服务信息，和主密钥ID
    2. 使用CREATE TABLE语法时，指定表是否未加密列
    3. 在插入数据时，init_page阶段，判断如果page属于加密表，将page标记为待加密的page
    4. 在向磁盘写入数据时，根据init_page阶段的加密标记，对page进行加密
    5. 在从磁盘中读取数据时，也是根据加密标记进行解密
3. 难点
    1. 

# 4 密态数据库
1. 原理
    - 背景：很多场景下，数据存储流程：从应用->数据库驱动->网络->数据库服务端->磁盘。
    - 原理：在数据库驱动中对数据进行加密，即在数据被发送给服务端之前被加密。但是，会引入一个问题，数据库服务端的数据是密文的，它就无法在密文上进行计算，比如：范围查询、模糊查询、排序等操作，所以密态数据库另一个重点就是解决密文计算问题。
2. 实现

# 5 

pg-internal.vonng.com