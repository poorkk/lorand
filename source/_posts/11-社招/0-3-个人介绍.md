---
title: 0-3 个人介绍
date: 2023-01-01 16:03:37
categories:
    - 社招
tags:
    - 社招
---

[toc]

# 1 个人信息
## 1.1 个人介绍
您好，我叫沈坤。我从5个方面介绍自己，包括：教育、能力、工作、项目、爱好

1. 教育方面：我20年，毕业于北京邮电大学的信息安全专业，课程主要是计算机公共课程与安全课程
2. 能力方面：我对数据库内核、数据库安全、后端开发、安全开发都还算了解。平时的学习、工作都和这四个方向有关
2. 工作方面：毕业到现在4年里，一直在华为的2012实验室下从事数据库内核开发，部门产品是GaussDB和openGauss，我主要做一些安全特性：比如密态数据库和透明加密
4. 项目方面：工作上主要做了2个较大的数据库内核特性，一个是全密态数据库，和执行模块交互较多。一个是透明加密，和存储模块交互较多。
5. 爱好方面：比较喜欢写代码，写一些博客，看数据库源码，看数据库的书

## 1.2 离职原因
- 高斯
    1. 地域原因：离家远，几乎无法回家，遇到家里有一些事，比如长辈身体不好，回家麻烦
    2. 工作原因：交付流程有点慢。我先说下背景，最近两年，几十个客户开始用我做的特性，比如透明加密，所以需求比较多。交付过程中，流程很慢：
        1. 需求、设计评审，需要十多个人评审，必须全部评审，才能走到下一环节，大部分人要催很多遍，需求多了，天天催，很难受
        2. 开发：开发周期短，很多特性一两个月开发。我们的功能比较多，我们过了信创二级，适配点很多。短时间学习和开发，且参考资料较少，代码注释少，压力大
            - 10多种表： 段页式表、压缩表、行存表、ustore表
            - 4套执行引擎
            - 2套存储接口
            - 3套xlog回访机制
            - 细粒度备份恢复、扩容、hashbucket扩容
        3. 交付：交付流程很重，多种部署形态，要跑10多种check，测试性能指标
        4. 维护：review gate：责任田不回复，直属领导也经常不回复
    3. 生活原因：如果考虑长期居住，落户、买车、摇号、买房等各方面
- 无线
    1. 工作强度：每天都是10点
    2. 新人培养：自己了解无线知识，自己熟悉交付流程，自己熟悉代码
    3. 个人兴趣：不喜欢无线，还是对数据库感兴趣

# 2 教育经历

# 3 工作经历
## 一、熟悉11个安全特性：
### 1. 透明加密
- 背景
    - 用户将数据发送给数据库后，数据库按照一定方式组织用户数据，并把用户数据存储至表特定的表文件中，同时，为了提高性能、可靠性、可用性等，还可能在很多文件中记录用户数据，比如：索引文件、redo日志文件、undo日志文件、双写文件等，这些文件中，也会包含用户数据。
- 问题
    - 在数据库所在的机器上，攻击者通过操作系统或其他软件的漏洞，可直接从磁盘中获取数据，造成数据泄露
- 解决
    - 数据库将数据落盘时，先加密数据，再将数据密文落盘；
    - 从磁盘读取数据后，先解密数据密文，再操作数据。
    - 如果数据文件泄露，里面的数据都是数据密文，攻击者无法获取有效数据
- 特点
    1. 数据与密钥隔离，避免拖库：数据密文存储在数据库，关键的顶级密钥由独立的密钥服务管理
    2. 密钥凭证最小化：数据库进程拥有访问密钥服务的凭证
- 使用：
    1. 配置访问参数
    2. 创建加密表/索引
    3. 向表中存储数据，向表文件中存储数据，生成redo log，异步加密并落盘数据
    4. 从表读取数据，读取并解密数据
- 难点
    1. 加密范围：识别加密范围：表、索引、redo log、undo log、双写文件等的存储规律，考虑分区表、分布式等特点，以及基于redo log的主备数据复制、物理备份、逻辑备份等
    2. 影响范围：加密redo log的影响范围：故障恢复、主备同步、逻辑解码、物理备份、PITR恢复、扩容等
    3. 性能开销：加密redo log的开销，sm4加密的开销
- 友商
    1. oracle / sql server有透明加密，国内oceanbase等常见数据库也都有透明加密。关键在于加密粒度、加密redo log和undo log等

### 2. 密态等值
- 背景
    - 应用需要将数据存储至数据库时，数据需要经过网络传输、数据库进程处理、磁盘存储等多个阶段
- 问题
    - 上述传输、计算、存储等多个环节，可能存在数据泄露问题
    - 传输有SSL，还好
    - 存储有透明加密，也还好
    - 一个比较典型的威胁是，云服务提供商不可信任，而且，数据库内存中的数据，也存在泄露的可能
- 解决
    - 针对特定的列：执行INSERT等语法，向表中存储数据时，在驱动端中，自动加密语法中的数据；
    - 执行SELECT等语法时，在驱动端自动解密查询结果中的数据
- 特点
    - 在驱动端，也就是客户的应用，可以加密与解密数据。除了驱动，只有数据库所在机器的机密计算环境可以解密，机密计算是由硬件、驱动、软件组成的安全的环境，攻击者无法造成攻击
- 使用
    1. 配置访问参数
    2. 定义密钥，创建表，定义加密列
    3. 向表中存储数据，驱动解析语法，加密语法中的数据
    4. 从表中读取数据，数据库将数据密文传输至机密计算环境中，在可信环境中解密，计算，又加密传输到数据库内存中
    5. 客户端接收到密文，解密密文
- 难点
    1. 可维护性：语法解析
    2. 可维护性：jdbc, libpq, python驱动，go驱动等
    1. 加密范围：识别SQL语法中的数据：INSERT、UPDATE等语法中数据的位置，语法解析
    2. 识别范围：识别后加密数据，客户端语义分析，检查是否加密，采用哪个密钥加密等；需要考虑不同的数据类型，使用不同的加密方法。
    3. 功能约束：比如DDL约束：ALTER COLUMN等，DML约束：SELECT INTO等，等值与非等值的约束
- 友商
    1. Oracle没有，SQL Server有，做的比较好。PolarDB有，不过不太透明，数据类型需要手动指定。其他厂商没有

### 3. 机密计算
- 背景
    - 机密计算：
- 问题
    - 在密态等值查询特性中，数据库服务端接收到与存储的数据都是密文。假如用户发送一条范围查询，数据库服务端无法在密文上比较大小，无法处理范围查询
- 解决
    - 用户执行范围查询、模糊查询、排序、函数计算等操作时，服务端接受请求后，基于机密计算框架，将数据密文从数据库内存发送至可信执行环境中
    - 可行执行环境对数据进行解密，计算，并加密返回结算结果
    - 数据库驱动端解密数据
- 特点
    1. 数据明文只存在数据库驱动侧，可信执行环境侧，可有效解决所有安全攻击
- 使用
    1. 用户与数据库建立连接，然后与可信执行环境建立连接，用户通过可行通道，将数据密钥发送至可信执行环境中
    2. 数据库发送范围查询等请求时，服务端自动将密文运算操作传送至可信执行环境内
    3. 数据库驱动会自动解密可信环境返回的密文结果
- 难点
    1. 计算范围：识别所有的密文计算
    2. 计算性能：举一个例子，比如进行范围查询，在执行引擎，主要是SeqScan算子中，进行计算，每次扫描一个Tuple，都要与可行执行环境进行一次交互
    3. 生态问题：
- 友商
    1. 微软：机密计算，不知道具体进展，
    2. 阿里：polar db，功能较多，不过，不够透明

### 4. 安全传输
- 背景
    - 通常，用户的服务器与数据库部署在不同机器上，应用与数据库通信时，采用网络发送数据
- 问题
    - 应用服务器、服务器所在网络，数据库服务器、数据库所在网络，都可能存在窃听、伪造等攻击
- 解决
    - 基于SSL协议，实现通信的可认证性、机密性
- 使用
    1. 通信前：申请证书，配置证书
    2. 通信开始时：双方协商密钥
    3. 通信时：通过协商的密钥加密数据
- 难点
    1. 无
- 友商
    1. 无
    
### 5. 加密函数
- 背景
    - 用户将数据发送给数据库后，数据库按照一定方式组织用户数据，并把用户数据存储至表特定的表文件中，同时，为了提高性能、可靠性、可用性等，还可能在很多文件中记录用户数据，比如：索引文件、redo日志文件、undo日志文件、双写文件等，这些文件中，也会包含用户数据。
- 问题
    - 在数据库所在的机器上，攻击者通过操作系统或其他软件的漏洞，可直接从磁盘中获取数据，造成数据泄露
- 解决
    - 数据库提供内置的加密函数，应用向数据库插入数据时，主动调用加密函数加密数据，数据库现在执行模块对数据加密，在存储模块存储加密后的数据
- 使用
    1. 数据存储：用户存储数据时，在DML语句中，主动调用加密函数
    2. 数据读取：用户读取数据时，在DML语句中，主动调用解密函数
- 难点
    1. 从数据的角度看，用户在SQL语句中传入密钥，数据库运行日志，审计日志等可能记录SQL语句，需要对SQL语句中的敏感参数进行脱敏

### 6. 身份认证
- 背景
    - 数据库在主机上监听端口，只要网络环境通常，任何节点的可与数据库建立TCP连接
- 问题
    - 攻击者可尝试与数据建立TCP连接，并且让数据库执行SQL语句
- 解决
    - 合法的数据用户，需提供身份证明，比如密码、证书等
- 使用
    1. 生成凭据：管理员执行CREATE USER/ROLE等语句，创建用户，并为用户设置密码
    2. 身份鉴别：用户连接数据，为数据库提供密码，数据库通过判断密码是否正确，来确认是否是合法用户
- 难点
    1. 无

### 7. 访问控制
- 背景
    - 一个数据库系统中，存在多个用户，每个用户都可以创建自己的数据库对象，比如表、数据库之类的
- 问题
    - 每个用户的对象，应该相互隔离
- 解决
    - 自主访问控制：
    - 强制访问控制：
    - 角色访问控制：
    - 规则访问控制：
- 特点
    1. 
- 使用
    1. 
- 难点
    1. 
- 友商
    1. 

### 8. 安全审计
- 背景
    - 数据库运行过程中，如果
- 问题
    - 
- 解决
    - 
- 特点
    1. 
- 使用
    1. 
- 难点
    1. 
- 友商
    1. 

### 9. 数据发现
- 背景
    - 
- 问题
    - 
- 解决
    - 
- 特点
    1. 
- 使用
    1. 
- 难点
    1. 
- 友商
    1. 

### 10. 数据防篡改
- 背景
    - 
- 问题
    - 
- 解决
    - 
- 特点
    1. 
- 使用
    1. 
- 难点
    1. 
- 友商
    1. 

### 11. 数据脱敏
- 背景
    - 
- 问题
    - 
- 解决
    - 
- 特点
    1. 
- 使用
    1. 
- 难点
    1. 
- 友商
    1. 

## 二、1000+产品问题
1. 白盒代码问题：内存泄露
2. 提权问题：新增SQL语句，未调用权限控制函数
3. 功能问题：执行某个功能，报错，需判断报错属于哪个模块

## 三、10+子模块
1. 数据库驱动 libpq
2. 语法解析
3. 语义分析
4. 计划生成
5. 计划执行
6. 存储接口 heapam
7. 索引
8. 事务
9. 共享缓冲区 Buffer
10. 空闲空间管理 FSM
11. 页面管理 Page
12. 预写日志 Wal
13. PageWrite
14. Checkpointer
15. 主备同步
16. 故障恢复
17. 其他：内存管理

# 4 项目经历
## 一、透明加密
- 加密9种表：
    > 1. astore, ustore
    > 2. partition, toast, 
    > 3. temp, global-temp, unlogged
    > 4. segment（原理）, hashbucket
- 加密2种索引：
    > 1. btree
    > 2. ubtree（）
- 支持3种密钥服务
    > 1. 公有云
    > 2. 混合云
    > 3. 私有云 HIS
- 5种加密算法：aes_128_ctr, sm4_ctr, aes_128_gcm, aes_128_ctr_sha256_hmac, sm4_ctr_sm3_hmac
- 6个高性能设计：
    > 1. 缩短临界区（iv）：bgwriter线程数少，提前生成iv、存储加密元信息的操作
    > 2. 降低加密次数（双写）：双写模块，拼接多个脏页，加密1次
    > 3. 缓存密钥流（xlog）：频繁提交事务，频繁落盘redo-log，一次性生成8k密钥流
    > 4. 异步加密（新线程）：提前生成IV，提前生成密钥流
    > 5. 避免无效加密（主备复制）：在decode时解密，主备复制，无需解密。crc校验bypass
    > 6. 加速缓存查找（hash表）：pg自带hash表，只能锁全表。以密钥第1字节为hash值，分256个桶。每个桶自己有锁
## 二、密态数据库
- 9种计算：
    - 
- 4个高性能设计：
    > 1. 排序：减少发给tee的数据：排序过滤条件，将明文过滤条件提前
    > 2. 批量：减少与tee的交互数：批量过滤、批量调用内置函数
    > 3. 通信：降低与tee的交互开销：引入共享内存机制，使用独立的共享内存分配算法
    > 4. 异步：异步交互：数据发送给tee后，不阻塞等待
## 三、netfiltere防火墙
- 4种静态包过滤：
    > 1. IP
    > 2. 端口
- 2种静态包过滤：
## 四、国密网盘
- 加密传输
- 加密存储
    ```python
    receive()
        if 'file info':
            read('file info')
            decrypt('file info')
        elif 'file'
            read('file info')
            decrypt('file info')
            read('file')
            decrypt('file')
    ```
## 五、kkdb

# 5 能力范围
1. 操作系统：进程线程、内存管理、IO
    ok
2. 计算机网络：HTTP / TCP / IP / SOCKET
    ok
3. 编程能力：函数执行、汇编、编译、leetcode
4. 密码学：aes, rsa, ssl, pki
5. 网络安全：欺骗、扫描、dos、netfilter
    ok
6. 数据库

# 6 实习经历

# 7 技能爱好
防火墙：
支持4种静态、2种动态的3级与4级包过滤功能；支持检测与预防1种欺骗，3+3+5种信息采集，6种DOS攻击。
源IP、目标IP
源端口、目标端口
源IP速率
整体发送速率

# 8 Leetcode
